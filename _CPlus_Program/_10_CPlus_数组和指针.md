# C Plus 数组和指针

---
- [C Plus 数组和指针](#c-plus-数组和指针)
  - [1. 数组](#1-数组)
    - [1.1 数组: 指定初始化器(C99)](#11-数组-指定初始化器c99)
    - [1.2 多维数组](#12-多维数组)
  - [2. 指针与数组](#2-指针与数组)
    - [2.1 指针与地址的关系](#21-指针与地址的关系)
  - [3. 函数、数组和指针](#3-函数数组和指针)

---
## 1. 数组

- 数组有数据类型相同的一系列元素组成。
- 当初始化列表中的值少于数组元素个数时，编译器会把剩余的元素都初始化为0;
- 初始化的数组元素个数不能超过数组长度

```c
    //1. 数组的声明包括数据类型与数组大小
    int IntArr[count];  
    int Arr[10]; // 内含 10 个 int 类型元素的数组

    //2. 初始化
    int Arr[10] = {0,1,2,3,4,5,6,7,8,9};

    int Arr[10];
    Arr[0] = 0;
    Arr[1] = 1; //..........

    //3. const 只读数组
    const int Arr[3] = {};  //声明并初始化
    // 当初始化列表中的值少于数组元素个数时，编译器会把剩余的元素都初始化为 0
```

---
### 1.1 数组: 指定初始化器(C99)

```c
    int arr[5] = {0,1,2,3,4};   // 传统方式
    int Arr[5] = {[2] = 2};     // 将 Arr[2] = 2, 指定初始化器, 其余元素为默认值
```

---
### 1.2 多维数组

```c
    int Arr[length0][length1];
    int Arr[3][3][3][3];  //......多维数组

    int Array[4][4] = {
        {1,2,3,4},
        {10,20,30,40},
        {100,200,300,400},
        {0,0,0,0}
    }
```

---
## 2. 指针与数组

- 数组表示法其实是变相地使用指针。
- 数组名是数组首元素的地址。
- 如果 Array 是一个数组，下面的语句成立：
    - Array == &Array[0]; // 数组名是该数组首元素的地址

> 数组指针地址

```c
#include <stdio.h>
#define SIZE 4
int main(void)
{
	short dates[SIZE];
	short* pti;		// 对应 short 数组指针
	short index;	// 数组索引
	double bills[SIZE];
	double* ptf;	// 对应 double 数组指针
	pti = dates;		// 把数组地址赋给指针
	ptf = bills;		

	printf("%22s %11s\n", "short", "double");
	for (index = 0; index < SIZE; index++)
		printf("pointers + %d: %10p %10p\n", 
			index, pti + index, ptf + index); 
	return 0;
}
/*
	                 short      double
	pointers + 0:   004FF994   004FF954
	pointers + 1:   004FF996   004FF95C
	pointers + 2:   004FF998   004FF964
	pointers + 3:   004FF99A   004FF96C
*/
```

- 数组内相邻元素地址对应关系：&arr[n+1] = &arr[n]+1 
- 指针类型加 1 表示增加一个存储单元，对于组数表示下一个元素地址，而不是表示下一个字节地址，因此这就要求指针与指向对象类型相对应（例如，pti 的类型是 short 类型，pti + 1，其值每次递增 2 字节）
- 在数组中，定义 arr[n] 的含义是 *(arr + n)  //(其中 arr = &arr[0])

---
### 2.1 指针与地址的关系

- 指针的值是它所指向对象的地址。地址的表示方式依赖于计算机内部的硬件。
- 许多计算机（包括 PC 和 Mac）都是按字节编址，意思是内存中的每个字节都按顺序编号。
- 一个较大对象的地址（如double类型的变量）通常是该对象第一个字节的地址。
- 在指针前面使用*运算符可以得到该指针所指向对象的值。
- 指针加 1，指针的值递增它所指向类型的大小（以字节为单位）。

---
## 3. 函数、数组和指针